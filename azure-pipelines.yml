# Starter pipeline
# Start with a minimal pipeline that you can customize to build and deploy your code.
# Add steps that build, run tests, deploy, and more:
# https://aka.ms/yaml

trigger:
  branches:
    include:
    - '*'

pool:
  vmImage: 'ubuntu-18.04'

stages:
  - stage: build
    displayName: 'Build'

    jobs:

      - job: build
        displayName: 'Build'
        steps:

        - task: Docker@2
          inputs:
            command: 'build'
            Dockerfile: '**/Dockerfile'

  - stage: dev
    displayName: 'Development'

    jobs:

      - deployment: deploy
        displayName: 'Deploy Helm Chart'

        environment: dev.default

        strategy:
          runOnce:
            deploy:
              steps:
                - task: HelmDeploy@0
                  inputs:
                    namespace: $(k8sNamespace)
                    command: 'ls'






